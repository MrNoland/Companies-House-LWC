<template>
        <article class="slds-card slds-card_boundary">
        <div class="slds-card__header">
          <header class="slds-media slds-media_center slds-has-flexi-truncate">
            <div class="slds-media__figure">
              <span class="slds-icon_container slds-icon-standard-account" title="account">
                <svg class="slds-icon slds-icon_small" aria-hidden="true">
                  <use xlink:href="/assets/icons/standard-sprite/svg/symbols.svg#account"></use>
                </svg>
                <span class="slds-assistive-text">Company Information</span>
              </span>
            </div>
            <span class="slds-media__body">
                <h2 class="slds-card__header-title">
                    <a href="https://find-and-update.company-information.service.gov.uk/company/" title="Click to view Companies House webpage">
                        <span>{companyName}</span>
                    </a>
                    <a title="Company Number">
                      <div class="slds-m-around_none"> 
                        <lightning-badge label={companyNumber}></lightning-badge>
                      </div>
                    </a>
                    <a title="Company Status">
                      <div class="slds-m-around_none">  
                        <lightning-badge label={companyStatus} class="slds-theme_success"></lightning-badge>
                      </div>  
                    </a>
                </h2>
                <a>
                    {companyOfficeAddress}<lightning-badge if:true={undeliverableRegOfficeAddress} label="Undeliverable" class="slds-theme_error"></lightning-badge>
                </a>
            </span>
            <div class="slds-no-flex">
              <button class="slds-button slds-button_neutral">Sync Customer</button>
            </div>
          </header>
        </div>
        <div class="slds-card__body slds-card__body_inner">
            <lightning-tabset if:true={companyName}>
                <lightning-tab label="Overview">
                    <div class="slds-grid slds-gutters">
                        <div class="slds-col">
                          <span>
                            <strong>Jurisdiction: </strong> {jurisdiction} <br>
                            <strong>Company Type: </strong> {companyType} <br>
                            <strong>Creation: </strong>{dateOfCreation} <br>
                            <strong>Cessation: </strong>{dateOfCessation} <br>
                            <strong>Can File: </strong>{canFile} <br>
                            <strong>Has Charges: </strong>{hasCharges} <br>
                            <strong>Has Incolvency History: </strong>{hasInsolvencyHistory} <br>
                            <strong>Is Community Interest Company: </strong>{isCommunityInterestCompany} <br>
                          </span>
                        </div>
                        <div class="slds-col">
                          <span>
                            <strong>Accounts </strong><lightning-badge if:false={accountsOverdue} label="Not Overdue" class="slds-theme_success"></lightning-badge><lightning-badge if:true={accountsOverdue} label="Overdue" class="slds-theme_error"></lightning-badge><br>
                            <strong>Last Made Up To: </strong>{lasAccountsTo} <br>
                            <strong>Next Made Up To: </strong>{nextAccountsTo} <br>
                            <strong>Next Due: </strong>{nextAccuontsDue} <br>
                          </span>
                        </div>
                        <div class="slds-col">
                          <span>
                            <strong>Conformation Statement</strong>
                                <lightning-badge if:false={statementsOverdue} label="Not Overdue" class="slds-theme_success"></lightning-badge>
                                <lightning-badge if:true={statementsOverdue} label="Overdue" class="slds-theme_error"></lightning-badge><br>
                            <strong>Last Made Up To: </strong>{lastStatememtTo} <br>
                            <strong>Next Made Up To: </strong>{nextStatementTo} <br>
                            <strong>Next Due: </strong>{nextStatementDue} <br>
                          </span>
                        </div>
                      </div>
                    <strong>Nature of Business (SIC):</strong> {sicCodes} <br>
                    <strong>Previous Company Names: </strong> {previousCompanyNames} <br><br>
                    <strong>Registration Number: </strong> {registrationNumber} <br>
                    <strong>Parent Registry: </strong> {parentRegistry} <br>
                    <strong>Incorporated In: </strong> {incorporatedIn} <br>
                    <strong>Credit Finance Institution: </strong> {creditFinanceInstitution} <br>
                    <strong>Governed By: </strong> {governedBy} <br>
                    <strong>Foreign Company Type: </strong> {foreignCompanyType} <br>
                    <strong>Business Activity: </strong> {businessActivity} <br>
                    <strong>Must File Within: </strong> {mustFilewithin} <br>
                    <strong>Account Period To Month: </strong> {accountPeriodToMonth} <br>
                    <strong>Account Period To Day: </strong> {accountPeriodToDay} <br>
                    <strong>Account Period From Month: </strong> {accountPeriodFromMonth} <br>
                    <strong>Account Period From Day: </strong> {accountPeriodFromDay} <br>
                    <strong>Terms of Account Publication: </strong> {termsOfAccountPublication} <br>
                    <strong>Foreign Account Type: </strong> {foreignAccountType} <br>

                </lightning-tab>

                <lightning-tab label="Filing History">
                  <lightning-combobox
                    name="category-filter"
                    label="Category Filter"
                    placeholder="Select to filter by document category"
                    options={categoryFilters}
                    onchange={handleCategoryFilterChange}>
                  </lightning-combobox>
                  <lightning-layout-item padding="verticle-small">
                    <lightning-combobox
                      name="items-filter"
                      label="Number of Items"
                      options={itemsFilter}
                      value="15"
                      onchange={handleItemsFilterChange}>
                    </lightning-combobox>
                  </lightning-layout-item>
                  <div>
                      <lightning-datatable 
                          key-field = "id" 
                          data={filingHistoryData} 
                          columns={filingHistoryColumns}
                          column-widths-mode="auto"
                          hide-checkbox-column>
                      </lightning-datatable>
                  </div>
                  <div class = "nav-buttons">
                    <template if:false={isFirstPage}>
                      <lightning-button
                        variant="neutral"
                        label="Previous Page"
                        title="Previous Page"
                        onclick={handlePrevPage}>
                      </lightning-button>
                    </template>
                    <template if:false={isLastPage}>
                      <lightning-button
                        variant="neutral"
                        label="Next Page"
                        title="Next Page"
                        onclick={handleNextPage}>
                      </lightning-button>
                    </template>
                  </div>
                  <div class = "page-info">
                    Total Records: {filingHistoryCount} <br>
                    Page: {pageNumber} of {totalPageCount}
                  </div>
                </lightning-tab>

                <lightning-tab label="Offiecrs">
                    <div>
                      <div if:false={showOfficerCard}>
                        Active Count: {officerActiveCount} / Resigned Count: {officerResignedCount}
                      </div>
                      <lightning-input 
                        if:false={showOfficerCard}  
                        type="toggle" 
                        label="Show Active Only"
                        message-toggle-active="Active Officers"
                        message-toggle-inactive="All Officers"
                        name="Active Officers">
                      </lightning-input>  
                      <lightning-datatable 
                            if:false={showOfficerCard}
                            key-field = "id" 
                            data={officerData} 
                            columns={officerColumns}
                            column-widths-mode="auto"
                            onrowaction={showOfficerDetails}
                            hide-checkbox-column>
                        </lightning-datatable>
                        <lightning-button
                            if:true={showOfficerCard}    
                            variant="neutral"
                            label="Back"
                            title="Back"
                            icon-name="utility:back"
                            icon-position="left"
                            onclick={backOfficerTable}>
                          </lightning-button>
                        <lightning-card  title={officerName} if:true={showOfficerCard}>
                          <lightning-button 
                            label="Sync Contact">
                          </lightning-button>
                          <p class="slds-p-horizontal_small">
                            <strong>Responsibilities: </strong>{officerResponsibilities} <br>
                            <strong>Resigned On: </strong>{officerResignedOn} <br>
                            <strong>Principal Address: </strong>{officerPrincipalAddress} <br>
                            <strong>Role: </strong>{officerRole} <br>
                            <strong>Occupation: </strong>{officerOccupation} <br>
                            <strong>Nationality: </strong>{officerNationality} <br>
                            <strong>Identification: </strong>{officerIdentification} <br>
                            <strong>Former Names: </strong>{officerformerNames} <br>
                            <strong>Date of Birth: </strong>{officerDateOfBirth} <br>
                            <strong>Country of Residence: </strong>{officerCountryOfResidence} <br>
                            <strong>Appointed On: </strong>{officerAppointedOn} <br>
                            <strong>Contact Details: </strong>{officerContactDetails} <br>
                            <strong>Address: </strong>{officerAddress} <br>
                          </p>
                          <lightning-datatable 
                            if:true={showOfficerCard}
                            key-field = "id" 
                            data={officerAppointmentsData} 
                            columns={officerAppointmentsColumns}
                            column-widths-mode="auto"
                            hide-checkbox-column>
                          </lightning-datatable>
                          
                        </lightning-card>
                    </div>
                </lightning-tab>

                <lightning-tab label="Beneficial Owners">
                    <lightning-datatable 
                      key-field = "id" 
                      data={pscData} 
                      columns={pscColumns}
                      hide-checkbox-column>
                    </lightning-datatable>
                    <template for:each={pscData} for:item="psc">
                      <lightning-card 
                        title={psc.name} 
                        key={psc.name}>
                        <p class="slds-p-horizontal_small">
                          <strong> Principal Office Address: </strong>
                          <strong> Notified On: </strong> {psc.notifiedx5fon} <br>
                          <strong> Nature of Control: </strong> {psc.naturesx5fofx5fcontrol} <br>
                          <strong> Nationality: </strong> {psc.principalx5fofficex5faddress} <br>
                          <strong> Kind: </strong> {psc.kind} <br>
                          <strong> Nationality: </strong> {psc.nationality} <br>
                          <strong> Is Sanctioned: </strong> {psc.isx5fsanctioned} <br>
                          <strong> Registration Number: </strong> {psc.identification.registrationx5fnumber} <br>
                          <strong> Place Registered: </strong> {psc.identification.placex5fregistered} <br>
                          <strong> Legal Form: </strong> {psc.identification.legalx5fform} <br>
                          <strong> Legal Authority: {psc.identification.legalx5fauthority} </strong> <br>
                          <strong> Country Registered: {psc.identification.countryx5fregistered} </strong> <br>
                          <strong> Description: </strong> {psc.description} <br>
                          <strong> Date of Birth: </strong> {psc.datex5fofx5fbirth} <br>
                          <strong> Country of Residence: </strong> {psc.countryx5fofx5fresidence} <br>
                          <strong> Ceased On: </strong> {psc.ceasedx5fon} <br>
                          <strong> Address: </strong> {psc.address} <br>
                        </p>
                      </lightning-card>
                  </template>
                </lightning-tab>

                <lightning-tab label="UK Establishments">
                    <lightning-datatable 
                            key-field = "id" 
                            data={ukEstablishmentsData} 
                            columns={ukEstablishmentsColumns}
                            hide-checkbox-column>
                        </lightning-datatable>
                </lightning-tab>

                <lightning-tab label="Charges">
                    <lightning-datatable 
                            key-field = "id" 
                            data={chargesData} 
                            columns={chargesColumns}
                            hide-checkbox-column>
                        </lightning-datatable>
                </lightning-tab>

                <lightning-tab label="Insolvency">
                    Insolvency Table
                </lightning-tab>
            </lightning-tabset>
        </div>
      </article>
    
</template>